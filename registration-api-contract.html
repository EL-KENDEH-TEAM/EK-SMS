<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EK-SMS - Registration API Contract</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      line-height: 1.6;
      color: #1f2937;
      background-color: #f9fafb;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 40px 24px;
    }
    
    header {
      margin-bottom: 40px;
      padding-bottom: 24px;
      border-bottom: 3px solid #1a365d;
    }
    
    .logo {
      font-size: 14px;
      font-weight: 600;
      color: #1a365d;
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-bottom: 8px;
    }
    
    h1 {
      font-size: 28px;
      font-weight: 700;
      color: #1a365d;
      margin-bottom: 8px;
    }
    
    .subtitle {
      font-size: 15px;
      color: #6b7280;
    }
    
    .meta {
      margin-top: 16px;
      font-size: 13px;
      color: #9ca3af;
    }
    
    .meta span {
      margin-right: 24px;
    }
    
    section {
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 28px;
      margin-bottom: 24px;
    }
    
    h2 {
      font-size: 20px;
      font-weight: 600;
      color: #1a365d;
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 2px solid #e5e7eb;
    }
    
    h3 {
      font-size: 16px;
      font-weight: 600;
      color: #374151;
      margin-top: 24px;
      margin-bottom: 12px;
    }
    
    p {
      margin-bottom: 12px;
      color: #4b5563;
    }
    
    .endpoint {
      background-color: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      margin-bottom: 24px;
      overflow: hidden;
    }
    
    .endpoint-header {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 16px;
      background-color: #f3f4f6;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .method {
      padding: 4px 10px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
    }
    
    .method-post {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .method-get {
      background-color: #dbeafe;
      color: #1e40af;
    }
    
    .endpoint-path {
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 14px;
      color: #1f2937;
    }
    
    .endpoint-body {
      padding: 16px;
    }
    
    .endpoint-desc {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 16px;
    }
    
    .code-block {
      background-color: #1f2937;
      color: #e5e7eb;
      padding: 16px;
      border-radius: 6px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 13px;
      overflow-x: auto;
      margin-bottom: 16px;
    }
    
    .code-block pre {
      margin: 0;
      white-space: pre;
    }
    
    .code-label {
      font-size: 12px;
      font-weight: 600;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }
    
    .field-table {
      width: 100%;
      border-collapse: collapse;
      margin: 12px 0;
      font-size: 14px;
    }
    
    .field-table th {
      text-align: left;
      padding: 10px 12px;
      background-color: #f3f4f6;
      border: 1px solid #e5e7eb;
      font-weight: 600;
      color: #374151;
    }
    
    .field-table td {
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      vertical-align: top;
    }
    
    .field-name {
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 13px;
      color: #dc2626;
    }
    
    .field-type {
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 12px;
      color: #6b7280;
    }
    
    .tag {
      display: inline-block;
      padding: 2px 8px;
      font-size: 11px;
      font-weight: 600;
      border-radius: 4px;
      margin-left: 6px;
    }
    
    .tag-required {
      background-color: #fee2e2;
      color: #991b1b;
    }
    
    .tag-optional {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .tag-conditional {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .response-codes {
      margin-top: 16px;
    }
    
    .response-code {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 10px 0;
      border-bottom: 1px solid #e5e7eb;
    }
    
    .response-code:last-child {
      border-bottom: none;
    }
    
    .status-code {
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 13px;
      font-weight: 600;
      padding: 2px 8px;
      border-radius: 4px;
      min-width: 50px;
      text-align: center;
    }
    
    .status-2xx {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .status-4xx {
      background-color: #fee2e2;
      color: #991b1b;
    }
    
    .status-5xx {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .response-desc {
      font-size: 13px;
      color: #4b5563;
    }
    
    .note {
      background-color: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 6px;
      padding: 12px 16px;
      font-size: 13px;
      color: #1e40af;
      margin: 16px 0;
    }
    
    .warning {
      background-color: #fffbeb;
      border: 1px solid #fde68a;
      border-radius: 6px;
      padding: 12px 16px;
      font-size: 13px;
      color: #92400e;
      margin: 16px 0;
    }
    
    ul {
      margin: 12px 0;
      padding-left: 24px;
    }
    
    li {
      margin-bottom: 6px;
      color: #4b5563;
    }
    
    .divider {
      height: 1px;
      background-color: #e5e7eb;
      margin: 24px 0;
    }
    
    footer {
      text-align: center;
      padding: 40px 0;
      color: #9ca3af;
      font-size: 13px;
    }
    
    .toc {
      background-color: white;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 20px 24px;
      margin-bottom: 24px;
    }
    
    .toc h2 {
      font-size: 16px;
      margin-bottom: 12px;
      padding-bottom: 8px;
    }
    
    .toc ul {
      list-style: none;
      padding-left: 0;
    }
    
    .toc li {
      margin-bottom: 8px;
    }
    
    .toc a {
      color: #2563eb;
      text-decoration: none;
      font-size: 14px;
    }
    
    .toc a:hover {
      text-decoration: underline;
    }
    
    .enum-list {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
    }
    
    .enum-item {
      background-color: #f3f4f6;
      padding: 4px 10px;
      border-radius: 4px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 12px;
      color: #4b5563;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">EK-SMS</div>
      <h1>Registration API Contract</h1>
      <p class="subtitle">API specification for the School Registration feature - shared reference for Backend & Frontend</p>
      <div class="meta">
        <span>Version: 1.0</span>
        <span>Last Updated: January 2025</span>
        <span>Base URL: /api/v1</span>
      </div>
    </header>
    
    <!-- Table of Contents -->
    <nav class="toc">
      <h2>Endpoints</h2>
      <ul>
        <li><a href="#submit">POST /school-applications - Submit Application</a></li>
        <li><a href="#verify-applicant">POST /school-applications/verify-applicant - Verify Applicant Email</a></li>
        <li><a href="#confirm-principal">POST /school-applications/confirm-principal - Principal Confirmation</a></li>
        <li><a href="#resend">POST /school-applications/resend-verification - Resend Verification Email</a></li>
        <li><a href="#status">GET /school-applications/{id}/status - Check Application Status</a></li>
        <li><a href="#countries">GET /countries - List Supported Countries</a></li>
      </ul>
    </nav>
    
    <!-- Base URL & Auth -->
    <section>
      <h2>Overview</h2>
      <p>These endpoints handle the school registration flow. All endpoints are <strong>public</strong> (no authentication required) since they are used before any account exists.</p>
      
      <h3>Base URL</h3>
      <div class="code-block">
        <pre>Production: https://api.eksms.dev/api/v1
Development: http://localhost:8002/api/v1</pre>
      </div>
      
      <h3>Content Type</h3>
      <p>All requests and responses use <code>application/json</code></p>
      
      <h3>Error Response Format</h3>
      <div class="code-block">
        <pre>{
  "error": "ERROR_CODE",
  "message": "Human readable error message",
  "details": {
    "field_name": ["Error message for this field"]
  }
}</pre>
      </div>
    </section>
    
    <!-- Endpoint 1: Submit Application -->
    <section id="submit">
      <h2>1. Submit Application</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/school-applications</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Submit a new school registration application. Triggers verification email to applicant.</p>
          
          <div class="code-label">Request Body</div>
          <div class="code-block">
            <pre>{
  "school": {
    "name": "Monrovia Central High School",
    "year_established": 1985,
    "school_type": "public",
    "student_population": "300-500"
  },
  "location": {
    "country_code": "LR",
    "city": "Monrovia",
    "address": "123 Broad Street, opposite Capitol Building"
  },
  "contact": {
    "school_phone": "+231886123456",
    "school_email": "info@mchs.edu.lr",
    "principal_name": "John D. Smith",
    "principal_email": "jsmith@mchs.edu.lr",
    "principal_phone": "+231886789012"
  },
  "applicant": {
    "is_principal": true,
    "name": null,
    "email": null,
    "phone": null,
    "role": null,
    "admin_choice": null
  },
  "details": {
    "online_presence": [
      {"type": "website", "url": "https://mchs.edu.lr"}
    ],
    "reasons": ["transparency", "automation"],
    "other_reason": null
  }
}</pre>
          </div>
          
          <div class="code-label">Request Fields</div>
          <table class="field-table">
            <thead>
              <tr>
                <th>Field</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="field-name">school.name</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Official school name (max 200 chars)</td>
              </tr>
              <tr>
                <td><span class="field-name">school.year_established</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">integer</span></td>
                <td>Year school was founded (1800-current year)</td>
              </tr>
              <tr>
                <td><span class="field-name">school.school_type</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>
                  School type:
                  <div class="enum-list">
                    <span class="enum-item">public</span>
                    <span class="enum-item">private</span>
                    <span class="enum-item">mission</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td><span class="field-name">school.student_population</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>
                  Student population range:
                  <div class="enum-list">
                    <span class="enum-item">under100</span>
                    <span class="enum-item">100-300</span>
                    <span class="enum-item">300-500</span>
                    <span class="enum-item">500+</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td><span class="field-name">location.country_code</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>ISO 3166-1 alpha-2 country code (e.g., "LR")</td>
              </tr>
              <tr>
                <td><span class="field-name">location.city</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>City or town name (max 100 chars)</td>
              </tr>
              <tr>
                <td><span class="field-name">location.address</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Physical address with landmarks (max 500 chars)</td>
              </tr>
              <tr>
                <td><span class="field-name">contact.school_phone</span> <span class="tag tag-conditional">Conditional</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>School phone (required if school_email is null)</td>
              </tr>
              <tr>
                <td><span class="field-name">contact.school_email</span> <span class="tag tag-conditional">Conditional</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>School email (required if school_phone is null)</td>
              </tr>
              <tr>
                <td><span class="field-name">contact.principal_name</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Principal's full name</td>
              </tr>
              <tr>
                <td><span class="field-name">contact.principal_email</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Principal's email (for confirmation)</td>
              </tr>
              <tr>
                <td><span class="field-name">contact.principal_phone</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Principal's phone number</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.is_principal</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">boolean</span></td>
                <td>True if applicant is the principal</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.name</span> <span class="tag tag-conditional">If not principal</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>Applicant's full name</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.email</span> <span class="tag tag-conditional">If not principal</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>Applicant's email (for verification)</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.phone</span> <span class="tag tag-conditional">If not principal</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>Applicant's phone</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.role</span> <span class="tag tag-conditional">If not principal</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>Applicant's role at school (e.g., "IT Officer")</td>
              </tr>
              <tr>
                <td><span class="field-name">applicant.admin_choice</span> <span class="tag tag-conditional">If not principal</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>
                  Who becomes school admin:
                  <div class="enum-list">
                    <span class="enum-item">applicant</span>
                    <span class="enum-item">principal</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td><span class="field-name">details.online_presence</span> <span class="tag tag-optional">Optional</span></td>
                <td><span class="field-type">array | null</span></td>
                <td>Array of {type: "website"|"facebook"|"other", url: string}</td>
              </tr>
              <tr>
                <td><span class="field-name">details.reasons</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">array</span></td>
                <td>
                  At least one reason:
                  <div class="enum-list">
                    <span class="enum-item">transparency</span>
                    <span class="enum-item">automation</span>
                  </div>
                </td>
              </tr>
              <tr>
                <td><span class="field-name">details.other_reason</span> <span class="tag tag-optional">Optional</span></td>
                <td><span class="field-type">string | null</span></td>
                <td>Additional reason text (max 500 chars)</td>
              </tr>
            </tbody>
          </table>
          
          <div class="code-label">Success Response (201 Created)</div>
          <div class="code-block">
            <pre>{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "awaiting_applicant_verification",
  "applicant_email": "jsmith@mchs.edu.lr",
  "message": "Application submitted. Please check your email to verify.",
  "verification_expires_at": "2025-01-13T12:00:00Z"
}</pre>
          </div>
          
          <div class="response-codes">
            <div class="code-label">Response Codes</div>
            <div class="response-code">
              <span class="status-code status-2xx">201</span>
              <span class="response-desc">Application created, verification email sent</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">400</span>
              <span class="response-desc">Validation error (missing/invalid fields)</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">409</span>
              <span class="response-desc">Duplicate application (same school name + city) or pending application exists for this applicant</span>
            </div>
          </div>
          
          <div class="note">
            <strong>Note:</strong> After successful submission, the system sends a verification email to the applicant's email address. The email contains a link with a token that expires in 72 hours.
          </div>
        </div>
      </div>
    </section>
    
    <!-- Endpoint 2: Verify Applicant -->
    <section id="verify-applicant">
      <h2>2. Verify Applicant Email</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/school-applications/verify-applicant</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Verify the applicant's email using the token from the verification email. If applicant is the principal, this also completes principal confirmation.</p>
          
          <div class="code-label">Request Body</div>
          <div class="code-block">
            <pre>{
  "token": "abc123xyz..."
}</pre>
          </div>
          
          <div class="code-label">Success Response (200 OK)</div>
          <div class="code-block">
            <pre>// If applicant IS the principal (single verification)
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "pending_review",
  "message": "Email verified. Your application is now under review.",
  "requires_principal_confirmation": false
}

// If applicant is NOT the principal (needs principal confirmation)
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "awaiting_principal_confirmation",
  "message": "Email verified. The principal has been notified to confirm.",
  "requires_principal_confirmation": true,
  "principal_email_hint": "j***@mchs.edu.lr"
}</pre>
          </div>
          
          <div class="response-codes">
            <div class="code-label">Response Codes</div>
            <div class="response-code">
              <span class="status-code status-2xx">200</span>
              <span class="response-desc">Email verified successfully</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">400</span>
              <span class="response-desc">Invalid or expired token</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">404</span>
              <span class="response-desc">Application not found</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">409</span>
              <span class="response-desc">Already verified</span>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Endpoint 3: Principal Confirmation -->
    <section id="confirm-principal">
      <h2>3. Principal Confirmation</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/school-applications/confirm-principal</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Principal confirms the application using the token from their confirmation email. Only called when applicant is different from principal.</p>
          
          <div class="code-label">Request Body</div>
          <div class="code-block">
            <pre>{
  "token": "xyz789abc..."
}</pre>
          </div>
          
          <div class="code-label">Success Response (200 OK)</div>
          <div class="code-block">
            <pre>{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "pending_review",
  "message": "Application confirmed. It is now under review by our team.",
  "school_name": "Monrovia Central High School"
}</pre>
          </div>
          
          <div class="response-codes">
            <div class="code-label">Response Codes</div>
            <div class="response-code">
              <span class="status-code status-2xx">200</span>
              <span class="response-desc">Application confirmed, moved to review queue</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">400</span>
              <span class="response-desc">Invalid or expired token</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">404</span>
              <span class="response-desc">Application not found</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">409</span>
              <span class="response-desc">Already confirmed or application not in correct state</span>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Endpoint 4: Resend Verification -->
    <section id="resend">
      <h2>4. Resend Verification Email</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-post">POST</span>
          <span class="endpoint-path">/school-applications/resend-verification</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Resend the verification email to the applicant. Rate limited to prevent abuse.</p>
          
          <div class="code-label">Request Body</div>
          <div class="code-block">
            <pre>{
  "application_id": "550e8400-e29b-41d4-a716-446655440000",
  "email": "jsmith@mchs.edu.lr"
}</pre>
          </div>
          
          <div class="code-label">Success Response (200 OK)</div>
          <div class="code-block">
            <pre>{
  "message": "Verification email resent successfully.",
  "expires_at": "2025-01-13T12:00:00Z"
}</pre>
          </div>
          
          <div class="response-codes">
            <div class="code-label">Response Codes</div>
            <div class="response-code">
              <span class="status-code status-2xx">200</span>
              <span class="response-desc">Email resent</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">400</span>
              <span class="response-desc">Email does not match application</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">404</span>
              <span class="response-desc">Application not found</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">409</span>
              <span class="response-desc">Already verified</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">429</span>
              <span class="response-desc">Rate limited (max 3 resends per hour)</span>
            </div>
          </div>
          
          <div class="warning">
            <strong>Rate Limit:</strong> Maximum 3 resend requests per application per hour to prevent email spam.
          </div>
        </div>
      </div>
    </section>
    
    <!-- Endpoint 5: Check Status -->
    <section id="status">
      <h2>5. Check Application Status</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/school-applications/{id}/status</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Check the current status of an application. Used to show progress to applicant.</p>
          
          <div class="code-label">Path Parameters</div>
          <table class="field-table">
            <thead>
              <tr>
                <th>Parameter</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="field-name">id</span></td>
                <td><span class="field-type">UUID</span></td>
                <td>Application ID</td>
              </tr>
            </tbody>
          </table>
          
          <div class="code-label">Query Parameters</div>
          <table class="field-table">
            <thead>
              <tr>
                <th>Parameter</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><span class="field-name">email</span> <span class="tag tag-required">Required</span></td>
                <td><span class="field-type">string</span></td>
                <td>Applicant email (for verification that requester has access)</td>
              </tr>
            </tbody>
          </table>
          
          <div class="code-label">Success Response (200 OK)</div>
          <div class="code-block">
            <pre>{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "school_name": "Monrovia Central High School",
  "status": "pending_review",
  "status_label": "Pending Review",
  "status_description": "Your application is in our review queue.",
  "submitted_at": "2025-01-10T10:00:00Z",
  "applicant_verified_at": "2025-01-10T10:30:00Z",
  "principal_confirmed_at": "2025-01-10T11:00:00Z",
  "steps": [
    {"name": "Application Submitted", "completed": true, "completed_at": "2025-01-10T10:00:00Z"},
    {"name": "Email Verified", "completed": true, "completed_at": "2025-01-10T10:30:00Z"},
    {"name": "Principal Confirmed", "completed": true, "completed_at": "2025-01-10T11:00:00Z"},
    {"name": "Under Review", "completed": false, "completed_at": null},
    {"name": "Decision", "completed": false, "completed_at": null}
  ]
}</pre>
          </div>
          
          <div class="response-codes">
            <div class="code-label">Response Codes</div>
            <div class="response-code">
              <span class="status-code status-2xx">200</span>
              <span class="response-desc">Status retrieved</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">403</span>
              <span class="response-desc">Email does not match application</span>
            </div>
            <div class="response-code">
              <span class="status-code status-4xx">404</span>
              <span class="response-desc">Application not found</span>
            </div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Endpoint 6: Countries List -->
    <section id="countries">
      <h2>6. List Supported Countries</h2>
      
      <div class="endpoint">
        <div class="endpoint-header">
          <span class="method method-get">GET</span>
          <span class="endpoint-path">/countries</span>
        </div>
        <div class="endpoint-body">
          <p class="endpoint-desc">Get list of supported countries for registration (West Africa for MVP).</p>
          
          <div class="code-label">Success Response (200 OK)</div>
          <div class="code-block">
            <pre>{
  "countries": [
    {"code": "LR", "name": "Liberia"},
    {"code": "SL", "name": "Sierra Leone"},
    {"code": "GN", "name": "Guinea"},
    {"code": "CI", "name": "Côte d'Ivoire"},
    {"code": "GH", "name": "Ghana"},
    {"code": "NG", "name": "Nigeria"},
    {"code": "SN", "name": "Senegal"},
    {"code": "GM", "name": "Gambia"}
  ]
}</pre>
          </div>
        </div>
      </div>
    </section>
    
    <!-- Application Statuses -->
    <section>
      <h2>Application Statuses Reference</h2>
      
      <table class="field-table">
        <thead>
          <tr>
            <th>Status</th>
            <th>Description</th>
            <th>Next Step</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span class="field-name">awaiting_applicant_verification</span></td>
            <td>Application submitted, waiting for applicant to verify email</td>
            <td>Applicant clicks email link</td>
          </tr>
          <tr>
            <td><span class="field-name">awaiting_principal_confirmation</span></td>
            <td>Applicant verified, waiting for principal to confirm</td>
            <td>Principal clicks email link</td>
          </tr>
          <tr>
            <td><span class="field-name">pending_review</span></td>
            <td>Fully verified, in admin review queue</td>
            <td>Admin opens application</td>
          </tr>
          <tr>
            <td><span class="field-name">under_review</span></td>
            <td>Admin is actively reviewing</td>
            <td>Admin makes decision</td>
          </tr>
          <tr>
            <td><span class="field-name">more_info_requested</span></td>
            <td>Admin requested additional information</td>
            <td>Applicant responds</td>
          </tr>
          <tr>
            <td><span class="field-name">approved</span></td>
            <td>Application approved, school created</td>
            <td>Complete</td>
          </tr>
          <tr>
            <td><span class="field-name">rejected</span></td>
            <td>Application rejected with reason</td>
            <td>Can reapply after 30 days</td>
          </tr>
          <tr>
            <td><span class="field-name">expired</span></td>
            <td>Verification not completed in 72 hours</td>
            <td>Must submit new application</td>
          </tr>
        </tbody>
      </table>
    </section>
    
    <footer>
      <p>EK-SMS Registration API Contract</p>
      <p>Version 1.0 • January 2025</p>
    </footer>
  </div>
</body>
</html>
